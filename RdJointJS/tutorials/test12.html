<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="http://jointjs.com/cms/downloads/joint.css" />
<script src="http://jointjs.com/js/vendor/jquery/jquery.min.js"></script>
<script src="http://jointjs.com/js/vendor/lodash/lodash.min.js"></script>
<script src="http://jointjs.com/js/vendor/backbone/backbone-min.js"></script>
<script src="http://jointjs.com/cms/downloads/joint.min.js"></script>
</head>
<body>

	<h1>Linking elements with ports</h1>
	
	<div id=paper></div>
	
	<script type="text/javascript">
	
	(function() {

		var graph = new joint.dia.Graph;
		var paper = new joint.dia.Paper({ el: $('#paper'), width: 1650, height: 1200, gridSize: 1, model: graph });

		var m1 = new joint.shapes.devs.Model({
		    position: { x: 50, y: 50 },
		    size: { width: 90, height: 90 },
		    inPorts: ['in1','in2'],
		    outPorts: ['out'],
		    attrs: {
		        '.label': { text: 'Model', 'ref-x': .4, 'ref-y': .2 },
		        rect: { fill: '#2ECC71' },
		        '.inPorts circle': { fill: '#16A085' },
		        '.outPorts circle': { fill: '#E74C3C' }
		    }
		});
		graph.addCell(m1);

		var m2 = m1.clone();
		m2.translate(300, 0);
		graph.addCell(m2);

		graph.on('change:source change:target', function(link) {
		    var sourcePort = link.get('source').port;
		    var sourceId = link.get('source').id;
		    var targetPort = link.get('target').port;
		    var targetId = link.get('target').id;

		    var m = [
		        'The port <b>' + sourcePort,
		        '</b> of element with ID <b>' + sourceId,
		        '</b> is connected to port <b>' + targetPort,
		        '</b> of elemnt with ID <b>' + targetId + '</b>'
		    ].join('');
		    
		    out(m);
		});

		function out(m) {
		    $('#paper-link-out').html(m);
		}

		}())
	
	</script>
</body>
</body>
</html>