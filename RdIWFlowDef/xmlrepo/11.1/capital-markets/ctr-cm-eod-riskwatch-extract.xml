<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- $Id: ctr-cm-eod-riskwatch-extract.xml 4168 2016-06-23 19:16:47Z gmusial $
	 Maestro version: 1.16.0 -->

<workflow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="workflowDefinition.xsd">
	<name>ctr-cm-eod-riskwatch-extract</name> 
  	<externalWorkflowCode>ctr-cm-eod-riskwatch-extract</externalWorkflowCode> 
  	<finishOrchestrationASAPOnError>false</finishOrchestrationASAPOnError> 
	<description>ctr-cm-eod-riskwatch-extract ($LastChangedRevision: 4168 $)</description>
	
	<!-- TODO: make these into input properties and pass from tidal -->
	<properties>
		<inputProperties>
			<property name="WF-EOD-EOM-INDICATOR">D</property>
			<property name="RUN-INSTANCE">1</property>
			<property name="IN-SOURCE-SYSTEM" />
		</inputProperties>
		<generalProperties>
			<property name="ROOT-WF-ID">ctr-cm-eod-riskwatch-extract</property>
			<property name="BUSINESS-DATE">${INITIALIZE-RUN.BUSINESS-DATE}</property>
			<property name="RUN-ID">${INITIALIZE-RUN-RW.P_EXPORT_BATCH_ID_O}</property>
			<property name="WORKFLOW_RUN_ID">0</property>
		</generalProperties>
	</properties>

	<sequential name="RISKWATCH-EXTRACT-WF" id="RISKWATCH-EXTRACT-WF">
	
		<externalWorkflowReference name="INITIALIZE-RUN" id="INITIALIZE-RUN">
			<externalWorkflowCode>INITIALIZE-RUN</externalWorkflowCode>
			<inputProperties>
				<property name="EOD-EOM-INDICATOR">${WF-EOD-EOM-INDICATOR}</property>
				<property name="SOURCE-SYSTEM">${IN-SOURCE-SYSTEM}</property>
				<property name="ROOT-WF-ID">${ROOT-WF-ID}</property>
				<property name="TARGET-SYSTEM">RISKWATCH</property>
				<property name="RUN-TYPE">BATCH</property>
				<property name="RUN-INSTANCE">${RUN-INSTANCE}</property>
				<property name="WORKFLOW-RUN-ID">${WORKFLOW_RUN_ID}</property>
			</inputProperties>
			<outputPropertyMapping>
				<mapping source="BUSINESS-DATE" target="BUSINESS-DATE"/>
				<mapping source="BUSINESS-DATE-FORMATTED" target="BUSINESS-DATE-FORMATTED"/>
				<mapping source="RUN-ID" target="P_EXPORT_BATCH_ID_O"/>
				<mapping source="IS-MONTH-END" target="IS-MONTH-END"/>
			</outputPropertyMapping>
		</externalWorkflowReference>
		
		<stage name="TARGET-EXTRACT-RISKWATCH-COLLATERAL" id="RISKWATCH-COLLATERAL-T2E">
			<description>Generates riskwatch other collateral export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_collateral_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-COLLATERAL-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		

		<stage name="TARGET-EXTRACT-RISKWATCH-REPO" id="RISKWATCH-REPO-T2E">
			<description>Generates riskwatch repo export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_repo_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-REPO-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BONDOPTION" id="RISKWATCH-BONDOPTION-T2E">
			<description>Generates riskwatch bondoption export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_bondoption_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-BONDOPTION-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BONDFORWARD" id="RISKWATCH-BONDFORWARD-T2E">
			<description>Generates riskwatch bondforward export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_bondforward_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-BONDFORWARD-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-PMLOAN" id="RISKWATCH-PMLOAN-T2E">
			<description>Generates riskwatch pmloan export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_pmloan_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-PMLOAN-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FOREX" id="RISKWATCH-FOREX-T2E">
			<description>Generates riskwatch FOREX export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_forex_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FOREX-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BOND" id="RISKWATCH-BOND-T2E">
			<description>Generates riskwatch bond export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_bond_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-BOND-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-CONV-BOND" id="RISKWATCH-CONVERTIBLE-BOND-T2E">
			<description>Generates riskwatch convertible bond export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_conv_bond_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-CONVERTIBLE-BOND-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>		
		<stage name="TARGET-EXTRACT-RISKWATCH-EQUITY" id="RISKWATCH-EQUITY-T2E">
			<description>Generates riskwatch equity export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_equity_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-EQUITY-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-TBILL" id="RISKWATCH-Tbill-T2E">
			<description>Generates riskwatch Tbill export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_tbill_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-TBill-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FRN" id="RISKWATCH-FRN-T2E">
			<description>Generates riskwatch FRN export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_frn_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FRN-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<!-- R7 -->
		<stage name="TARGET-EXTRACT-RISKWATCH-IR-FUTURE" id="RISKWATCH-IR-FUTURE-T2E">
			<description>Generates riskwatch IR Future export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_ir_future_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-IR-FUTURE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BOND-FUTURE" id="RISKWATCH-BOND-FUTURE-T2E">
			<description>Generates riskwatch Bond Future export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_bond_future_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-BOND-FUTURE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FUTURE-OPTION" id="RISKWATCH-FUTURE-OPTION-T2E">
			<description>Generates riskwatch IR Future Option export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_future_option_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FUTURE-OPTION-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BOND-FUTURE-OPT" id="RISKWATCH-BOND-FUTURE-OPT-T2E">
			<description>Generates riskwatch Bond Future Option export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_bond_fut_opt_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-BOND-FUTURE-OPT-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FX-OPTION" id="RISKWATCH-FX-OPTION-T2E">
			<description>Generates riskwatch FX Option export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_fx_option_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FX-OPTION-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FX-OPTION-OTC" id="RISKWATCH-FX-OPTION-OTC-T2E">
			<description>Generates riskwatch FX Option OTC export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_fx_option_otc_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FX-OPTION-OTC-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-FX-FUTURE" id="RISKWATCH-FX-FUTURE-T2E">
			<description>Generates riskwatch FX Future export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_fx_future_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FX-FUTURE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-BR-FUTURE" id="RISKWATCH-BR-FUTURE-T2E">
			<description>Generates riskwatch BR Future export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_br_future_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-FX-FUTURE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-EQUITY-FUTURE" id="RISKWATCH-EQUITY-FUTURE-T2E">
			<description>Generates riskwatch EQUITY Future export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_equity_future_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-EQUITY-FUTURE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-EQUITY-OPTION" id="RISKWATCH-EQUITY-OPTION-T2E">
			<description>Generates riskwatch EQUITY OPTION export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_equity_option_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-EQUITY-OPTION-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<!-- R7 -->
		<stage name="TARGET-EXTRACT-RISKWATCH-BASKET" id="RISKWATCH-Basket-T2E">
			<description>Generates riskwatch Basket export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_basket_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-Basket-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		
		
		<stage name="TARGET-EXTRACT-RISKWATCH-PORTFOLIO" id="RISKWATCH-PORTFOLIO-T2E">
			<description>Generates riskwatch Portfolio export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_portfolio_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-PORTFOLIO-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<!-- R8 -->
		<stage name="TARGET-EXTRACT-RISKWATCH-SWAP" id="RISKWATCH-SWAP-T2E">
			<description>Generates RISKWATCH SWAP export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_swap_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-SWAP-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<!-- R10 -->
		<stage name="TARGET-EXTRACT-RISKWATCH-TRS" id="RISKWATCH-TRS-T2E">
			<description>Generates RISKWATCH TRS export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_trs_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-TRS-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>		
		<stage name="TARGET-EXTRACT-RISKWATCH-EXCEPTION" id="RISKWATCH-EXCEPTION-T2E">
			<description>Generates riskwatch exception export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_exception_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-EXCEPTION-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<stage name="TARGET-EXTRACT-RISKWATCH-DATA-CATALOGUE" id="RISKWATCH-DATA-CATALOGUE-T2E">
			<description>Generates RISKWATCH CATALOGUE export</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.ETL_INVOKER_SP">
					<in>
						<param name="P_TYPE_NAME_I" type="STRING">riskwatch_data_catalog_tp</param>
						<param name="P_METHOD_NAME_I" type="STRING">pub_export_data</param>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">EXTRACT</param>
						<param name="P_TASK_ID_I" type="STRING">RISKWATCH-DATA-CATALOGUE-T2E</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
						<param name="P_SOURCE_SYSTEM_CD_I" type="STRING">RISKWATCH</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
		<parallel name="DELIVER-FILES" id="DELIVER-FILES">
		
			<externalWorkflowReference name="RISKWATCH-DELIVER" id="RISKWATCH-DELIVER">
				<externalWorkflowCode>CM-EXTRACT-TO-RISKWATCH</externalWorkflowCode>
				<inputProperties>
					<property name="SOURCE-SYSTEM">${IN-SOURCE-SYSTEM}</property>
					<property name="RUN-ID">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</property>
					<property name="BUSINESS-DATE">${INITIALIZE-RUN.BUSINESS-DATE-FORMATTED}</property>
					<property name="EOD-EOM-IND">${WF-EOD-EOM-INDICATOR}</property>
				</inputProperties>
			</externalWorkflowReference>
			
		</parallel>
		
		
		<stage name="RUN-COMPLETE" id="RUN-COMPLETE">
			<description>Finalize the run and mark complete</description>
			<execDefinition>
				<dbProcedure name="CTRMSO.RUN_COMPLETION_SP">
					<in>
						<param name="P_RUN_ID_I" type="NUMBER">${INITIALIZE-RUN.P_EXPORT_BATCH_ID_O}</param>
						<param name="P_STAGE_ID_I" type="STRING">FINALIZE</param>
						<param name="P_TASK_ID_I" type="STRING">RUN-COMPLETE</param>
						<param name="P_LOG_ID_I" type="STRING">1</param>
						<param name="P_BUSSINESS_DATE_I" type="STRING">${BUSINESS-DATE}</param>
					</in>
					<out>
						<param name="P_RET_VALUE_O" type="NUMBER"></param>
						<param name="P_RET_MESSAGE_O" type="STRING"></param>
					</out>
				</dbProcedure>
			</execDefinition>
		</stage>
	</sequential>
</workflow>
	