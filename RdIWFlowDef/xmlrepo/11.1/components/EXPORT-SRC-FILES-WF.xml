<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!-- $Id: EXPORT-SRC-FILES-WF.xml 3690 2016-06-01 20:44:07Z gmusial $
	 Maestro version: 1.16.0 -->

<workflow xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="workflowDefinition.xsd">
	<name>EXPORT-SRC-FILES-WF</name> 
  	<externalWorkflowCode>EXPORT-SRC-FILES-WF</externalWorkflowCode> 
  	<finishOrchestrationASAPOnError>false</finishOrchestrationASAPOnError> 
	<description>EXPORT-SRC-FILES-WF ($LastChangedRevision: 3690 $)</description>

	<properties>
		<inputProperties>
			<property name="SOURCE-SYSTEM" />
			<property name="SOURCE-SYSTEM-LC" />
			<property name="DEST_URI" />
			<property name="SRC_URI" />
			<property name="DEST_SYSTEM" />
			<property name="SRCH_PATTERN" />  
		</inputProperties>
	</properties>
	<sequential name="EXPORT-SRC-FILES" id="EXPORT-SRC-FILES">
	<stage name="SFTP-FILES-TO-TARGET" id="SFTP-FILES-TO-TARGET">
		<skipCondition>'${DEST_URI}' == 'NONE' </skipCondition>
			<execDefinition>
				<javaExtension>
					<javaExtensionExecutorClassName>com.bns.ctr.maestro.javaexec.CtrSFTPFiles</javaExtensionExecutorClassName>
					<simpleProperties>
						<properties>
							<simpleProperty name="DESTINATION_URI">${DEST_URI}</simpleProperty>
							<simpleProperty name="SOURCE_URI">${SRC_URI}</simpleProperty>
							<simpleProperty name="DESTINATION_SYSTEM">${DEST_SYSTEM}</simpleProperty>
							<simpleProperty name="SEARCH_PATTERN">${SRCH_PATTERN}</simpleProperty>
						</properties>
					</simpleProperties>
					<javaExtensionOutputPropertyNames>
						<propertyName>sftpReturnStatus</propertyName>
						<propertyName>NoOfFilesTransferred</propertyName>
						<propertyName>NoOfFilesPendingTransfer</propertyName>
						<propertyName>ExceptionInSftp</propertyName>
						<propertyName>EmailSend</propertyName>
						
					</javaExtensionOutputPropertyNames>
				</javaExtension>
			</execDefinition>
		</stage>
	</sequential>
</workflow>
	